# Evidence Repository Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME=Evidence Repository
APP_VERSION=0.1.0
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# API Settings
# =============================================================================
API_V1_PREFIX=/api/v1

# =============================================================================
# Authentication
# =============================================================================
# API keys (comma-separated for multiple keys)
API_KEYS=your-api-key-here

# JWT Settings (for future upgrade)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# Database Settings (Neon PostgreSQL)
# =============================================================================
# Get your connection string from https://console.neon.tech
# Format: postgresql+asyncpg://user:password@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
DATABASE_URL=postgresql+asyncpg://user:password@ep-xxx.region.aws.neon.tech/evidence_repository?sslmode=require

# Connection pooling (lower for serverless)
DATABASE_POOL_SIZE=3
DATABASE_MAX_OVERFLOW=5

# =============================================================================
# Storage Settings (Vercel Blob or Cloudflare R2)
# =============================================================================
# Storage backend: "local" (dev only), "s3", or "vercel_blob"
STORAGE_BACKEND=s3

# Cloudflare R2 Settings (S3-compatible, recommended for Vercel)
AWS_ACCESS_KEY_ID=your-r2-access-key
AWS_SECRET_ACCESS_KEY=your-r2-secret-key
AWS_REGION=auto
S3_BUCKET_NAME=evidence-repository
S3_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com

# Vercel Blob Settings (alternative)
BLOB_READ_WRITE_TOKEN=vercel_blob_xxx

# Local storage (development only)
LOCAL_STORAGE_PATH=./data/uploads

# =============================================================================
# LovePDF Settings (PDF text extraction)
# =============================================================================
LOVEPDF_PUBLIC_KEY=your-lovepdf-public-key
LOVEPDF_SECRET_KEY=your-lovepdf-secret-key

# =============================================================================
# OpenAI Settings (Embeddings & LLM)
# =============================================================================
OPENAI_API_KEY=your-openai-api-key
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=1536

# =============================================================================
# Embedding Chunking Settings
# =============================================================================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# =============================================================================
# Background Processing (Serverless - No Redis Required)
# =============================================================================
# Uses database-as-queue pattern (Agent-K style)
# Redis is optional - only needed if you want faster job processing

# Optional: Upstash Redis (serverless Redis)
REDIS_URL=
REDIS_QUEUE_NAME=evidence_jobs
REDIS_JOB_TIMEOUT=300
REDIS_RESULT_TTL=3600

# =============================================================================
# File Upload Settings
# =============================================================================
MAX_FILE_SIZE_MB=50

# Supported file extensions (comma-separated)
SUPPORTED_EXTENSIONS=.pdf,.txt,.md,.csv,.xlsx,.xls,.docx,.pptx,.png,.jpg,.jpeg,.webp,.html

# =============================================================================
# CORS Settings
# =============================================================================
# Add your Vercel deployment URL
CORS_ORIGINS=["https://your-app.vercel.app","http://localhost:3000","http://localhost:3001"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# =============================================================================
# Vercel-specific Settings
# =============================================================================
# These are set automatically by Vercel, but can be overridden
VERCEL_ENV=development
VERCEL_URL=
